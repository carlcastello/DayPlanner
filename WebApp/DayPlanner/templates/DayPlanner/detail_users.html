{% extends 'base_cp.html' %}

{% load static %}
{% load widget_tweaks %}

{% block title %}Registered Users{% endblock %}

{% block css %}{% endblock %}

{% block main_content %}
<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">{{ account.user.first_name }} {{ account.user.last_name }}</h1>
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<div class="panel panel-default">
			<div class="panel-heading">
				<i class="fa fa-user" aria-hidden="true"></i> User Profile
			</div>
			<div class="panel-body">
				<strong>Username:</strong> {{ account.user.username }}
				<br>
				<strong>Email: </strong> {{ account.user.email }}
				<br>
				<strong>Address:</strong> {{ account.address }}
				<br>
				<br>
				<strong>Cell Phone Number:</strong> {{ account.cellphone }}
				<br>
				<strong>Home Phone Number:</strong> {{ account.homephone }}
				<br>
				<br>
				<strong>Date Joined: </strong> {{ account.user.date_joined }}
				<br>
				<strong>Last Login: </strong> {{ account.user.last_login }}
			</div>
			<div class="panel-footer">
				<div class="row">
					<div class="col-lg-12 text-right">
						<a class="btn btn-warning" id ="modify-article" href="#">Modify Account</a>
				        <a class="btn btn-danger" id="delete-article" href="#deleteUserModal" data-toggle="modal" {% if request.user.pk == account.user.pk %} disabled {% endif %} >Delete Account</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-lg-6">
		<div class="panel panel-default">
			<div class="panel-heading">
				<i class="fa fa-history" aria-hidden="true"></i> Last Activity
			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="deleteUserModal" role="dialog">
	<div class="modal-dialog">
		  <!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
			  <button type="button" class="close" data-dismiss="modal">&times;</button>
			  <h4 class="modal-title">Delete User</h4>
			</div>
			<div class="modal-body">
				<div class="text-center">
					<h2>
						Are you sure you want to delete this user?
					</h2>
				</div>
			</div>
			<div class="modal-footer">
				<div class="form-group">
					<form role="form" method="post">
						{% csrf_token %}
						<button class="btn btn-danger" name="confirm-user-delete" value="true" type="submit" >Delete</button>
						<button class="btn btn-default" data-dismiss="modal">Close</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>


{% endblock %}

{% block javascript %}
<!-- <script>
// https://stackoverflow.com/questions/16144018/how-to-get-the-specific-form-field-value-using-jquery
$(function() {
	$('form').on('submit', function(event) { //use on if jQuery 1.7+
		event.preventDefault();
		// https://stackoverflow.com/questions/38526573/django-make-a-post-request-on-form-submit-without-reloading-the-page-or-renderi
		var form = $(this);
		var string = form.serialize();
		var posting = $.post(form.attr('action'),form.serialize());
		// console.log(string);
		posting.done(function(data) {
            // success actions, maybe change submit button to 'friend added' or whatever
            // console.log("Success")
            window.location.replace("/app/users");
        });
        // if failure:
        posting.fail(function(data) {
            // 4xx or 5xx response, alert user about failure
            console.log("Error")
        });
		return false;
	});
});
</script> -->

<script type="text/javascript">
$(function() {
	$("#side-menu li:nth-child(2) a").addClass("active");
});
</script>
{% endblock %}
